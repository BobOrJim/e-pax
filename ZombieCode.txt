@using (@Html.BeginForm("WriteRolesToUser", "DetailedUser", FormMethod.Post))
{

    @Html.HiddenFor(m => m.UserName)

    @for (int i = 0; i < Model.UsersRoles.Count; i++)
    {
        @Html.CheckBoxFor(m => m.UsersRoles[i].UserHasThisRole)
        @Html.DisplayFor(m => m.UsersRoles[i].RoleName)
        <br>
    }

    <button type="submit">Save Changes</button>
}



<form asp-controller="DetailedUser" asp-action="WriteRolesToUser" method="post">
    @for (int i = 0; i < Model.UsersRoles.Count; i++)
    {
        @Html.HiddenFor(m => m.UsersRoles[i].RoleName)
        @Html.CheckBoxFor(m => m.UsersRoles[i].UserHasThisRole)
        @Html.DisplayFor(m => m.UsersRoles[i].RoleName)
        <br>
    }
    <button type="submit">Save Changes</button>
</form>

